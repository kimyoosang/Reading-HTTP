# Chapter2. URL과 리소스

## **2.1 HTTP: 인터넷의 리소스 탐색하기**

- URL은 브라우저가 정보를 찾는데 필요한 리소스의 위치를 가리키며, URL을 이용해 사람과 애플리케이션이 인터넷상의 수십억 개의 리소스를 찾고 사용하며 공유 할 수 있다
- 사용자는 브라우저에 URL을 입력하고 브라우저는 화면 뒤에서 사용자가 원하는 리소스를 얻기 위해서 ㅈ거절한 프로토콜을 사용하여 메시지를 전송한다
- URL은 통합 자원 식별자, 혹은 URI라고 불리는 더 일반화된 부류의 부분집합이다. URI는 두 가지 주요 부분집합인 URL과 URN으로 구성된 종합적인 개념이다

1. http://www.joes-hardware.com/seasonal/index-fall.html 이라는 URL을 불러올때를 가정해보자

- URL의 첫 부분인 http는 URL의 스킴이다. 이 경우에, URL이 HTTP 프로토콜을 사용한다
- 두 번째 부분인 www.joes-hardware.com은 서버의 위치다. 웹 클라이언트가 리소스가 어디에 호스팅 되어 있는지 알려준다
- 세 번째 부분인 /seasonal/index-fall.html은 리소스의 경로다. 경로는 서버에 존재하는 로컬 리소스들 중에서 요청받은 리소스가 무엇인지 알려준다

### **2.1.1 URL이 있기 전 암흑의 시대**

- 웹과 URL이 있기 전에 사람들은 네트워크상에 산재해 있는 데이터에 접근하기 위해서, 애플리케이션마다 달리 가지고 있는 분류 방식을 사용했다
- URL을 사용하면 이런 애플리케이션들에서 하나의 인터페이스를 통해 일관된 방식으로 많은 리소스에 접근할 수 있다

### **2.2 URL 문법**

- URL문법은 스킴에 따라서 달라진다. 대부분의 URL은 일반 URL 문법을 따르며, 서로 다른 URL 스킴도 형태와 문법면에서 매우 유사하다
- **<스킴>://<사용자의 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>**
- URL의 가장 중요한 세 가지 컴포넌트는 스킴, 호스트, 경로다

### **2.2.1 스킴: 사용할 프로토콜**

- 스킴 컴포넌트는 알파벳으로 시작해야 하고 URL의 나머지 부분들과 첫 번째 ':'문자로 구분한다. 스킴 명은 대소문자를 가리지 않으므로 http와 HTTP는 같다

### **2.2.2 호스트와 포트**

- 애플리케이션이 인터넷에 있는 리소스를 찾으려면, 리소스를 호스팅하고 있는 장비와 그 장비 내에서 리소스에 접근할 수 잇는 서버가 어디에 있는지 알아야 한다
- 호스트 컴포넌트는 접근하려고 하는 리소스를 가지고 있는 인터넷상의 호스트 장비를 가리킨다. 해당 값은 호스트 명이나 IP주소로 제공한다
- 포트 컴포넌트는 서버가 열어놓은 네트워크 포트를 가리킨다. 내부적으로 TCP프로토콜을 사용하는 HTTP 기본 포트로 80을 사용한다

### **2.2.3 사용자 이름과 비밀번호**

- 많은 서버가 자신이 가지고 있는 데이터에 접근을 허용하기 전에 사용자 이름과 비밀번호를 요구한다
- 예를 들어 FTP서버는 애플리케이션이 사용자 이름과 비밀번호를 요구하는 URL스킴을 사용한다면, 그 값들이 삽입되어 있지 않을 경우 기본 사용자 이름과 비밀번호 값을 넣어놓을 것이다
- 사용자 일므이 'anonymous'로 되어있다면 '@'문자는 URL로부터 사용자 이름과 비밀번호 컴포넌트를 분리한다

### **2.2.4 경로**

- URL의 경로 컴포넌트는 리소스가 서버의 어디에 있는지 알려준다
- HTTP URL에서 경로 컴포넌트는 '/'문자를 기분으로 경로조각으로 나뉜다. 각 경로조각은 자체만의 파라미터 컴포넌트를 가질 수 있다

### **2.2.5 파라미터**

- URL을 사용하는 애플리케이션이 리소스에 접근하려면 프로토콜 파라미터가 필요하다. 프로토콜 파라미터가 없으면, 다른 한편에 있는 서버는 그 요청을 잘못 처리하거나 처리를 하지 않을것이다
- URL의 파라미터 컴포넌트는 이름/값 쌍의 리스트로 URL 나머지 부분들로부터 ';'문자로 구분하여 URL에 기술한다
- 각 조각은 자체 파라미터를 가질수 있다

1. http://www.jews-hardware.com/hammers;sale=false/index.html;graphics=true

- 물음표(?) 우측에 있는 값을 질의 컴포넌트라고 부른다. URL의 질의 컴포넌트는 게이트웨이를 가리키는 URL의 경로 컴포넌트와 함께 전달하고 있다. 보통 게이트웨이는, 다른 애플리케이션에 접근하려고 할 때 거치는 통로라고 할 수 있다
- 편의상 많은 게이트웨이가 '&'나뉜 '이름=값' 쌍 형식의 질의 문자열을 원한다

### **2.2.7 프래그먼트**

- 리소스의 특정 부분을 가리킬 수 있도록, URL은 리소스 내의 조각을 가리킬 수 있는 프로그먼트 컴포넌트를 제공한다
- 예를 들어 URL은 HTML 문서에 있는 특정 이미지나 일부분을 가리킬수 있다

1. http://www.jeos-hardware.com/tools.html#drills

- 이 예에서 drills라는 프로그먼트는 죠의 컴퓨터 가게 웹 서버에 위치한 /tools.html 웹페이지의 일부를 가리킨다
- 일반적으로 HTTP 서버는 객체 일부가 아닌 전체만 다루기 때문에 클라이언트는 서버에 프래그먼트를 전달하지 않는다
- 브라우저가 서버로부터 전체 리소스를 내려받은 후, 프래그먼트를 사용하여 당신이 보고자 하는 리소스의 일부를 보여준다

## **2.3 단축 URL**

- 웹 클라이언트는 몇몇 단축 URL을 인식하고 사용한다. 상대 URL은 리소스안에 있는 리소스를 간결하게 기술하는데 사용할 수 있다

### **2.3.1 상대 URL**

- URL은 상대 URL과 절대 URL 두 가지로 나뉜다
- 절대 URL은 리소스에 접근하는데 필요한 모든 정보를 가지오 있다
- 상대 URL은 모든 정보를 담고 있지는 않다. 상대 URL로 리소스에 접근하는데 필요한 모든 정보를 얻기 위해서는, 기저(base)라고 하는 다른 URL을 사용해야 한다
- 상대 URL은 URL을 짧게 표기하는 방식이다

  **기저 URL**

- 기저 URL은 상대 URL의 기준이 된다. 그것을 가져오는 몇 가지 방법이 있다
  - 리소스에서 명시적으로 제공
    - 어떤 리소스들은 기저 URL을 명확하게 기술하기도 한다. 예를 들어 HTML 문서에서는 그 안에 있는 모든 상대 URL을 변경하기 위해서 기저 URL을 가리키는 <BASE> HTML을 기술할 수 있다
  - 리소스를 포함하고 있는 기저 URL
    - 만약 상대 URL이 기저 URL이 명싲되지 않은 리소스에 포함된 경우, 해당 리소스의 URL을 기저 URL로 쓸 수 있다
  - 기저 URL이 없는 경우
    - 절대 URL만으로 이루어져 있다는 뜻이다. 하지만 불완전하거나 꺠진 URL일 수 도 있다

### 2.3.2 URL확장\*\*

- 어떤 브라우저들은 URL을 입력한 다음이나 입력하고 있는 동안에 자동으로 URL을 확장한다. 이는 사용자가 URL을 빠르게 입력하게 도와준다
- 이러한 '확장' 기능은 두 가지로 나뉜다

  - **호스트명 확장**
    - 호스트명 확장 기능을 지원하는 브라우저는 단순한 휴리스틱만을 사용해서 입력한 호스트명을 전체 호스트명으로 확장할 수 있다
    - 예를 들어 'yahoo'를 입력하면, 브라우저는 호스트 명에 자동으로 'www'와 '.com'을 붙여서 'www.yahoo.com'을 만든다
  - **히스토리 확장**
    - 과거에 사용자가 방문했던 URL의 기록을 저장해 놓는 것이다
    - URL을 입력하면, 그 입력된 URL의 앞 글자들을 포함하는 완결한 형태의 URL들을 선택하게 해준다
    - 프락시를 사용할 경우 URL 자동확장 기능은 다르게 동작할 수 있다는 것을 유념한다

## **2.4 안전하지 않은 문자**

- 안전한 전송이란, 정보가 유실될 위험 없이 URL을 전송할 수 있다는 것을 의미한다
- URL 설계자는 사람들이 URL에 이진 데이터나 일반적으로 안전한 알파벳 외의 문자도 포함하려고 할 때가 있다는 것을 알게 되었다
- 그래서 이스케이프라는 기능을 추가하여, 안전하지 않은 문자를 안전한 문자로 인코딩 할 수 있게 하였다

### **2.4.1 URL 문자 집합**

- 역사적으로 많은 컴퓨터 애플리케이션이 US-ASCII 문자 결합을 사용해왔따
- 그러나 US-ASCII는 만들어진 지 오래된 문자 집합이기 때문에, 적은 수의 문자만을 포함한다. 그래서 전 세계 십수업의 사람들이 사용하는 유럽언어나 수백 가지의 비 라틴계 언어들에 존재하는 변형된 문자들까지 US-ASCII가 지원하지는 앟는다
- 이런 것들을 지원하기 위해서, URL설계자들은 URL에 이스케이프 문자열을 쓸 수 있게 설계하였다. 이스케이프 문자열은 US-ASCII에서 사용이 금지된 문자들로, 특정 문자나 데이터를 인코딩 할 수 있게 함으로써 이동성과 완성도를 높였다

### **2.4.2 인코딩 체계**

- 안전한 문자 집합을 이용하는 경우 그 표현의 한계를 넘기 위해, URL에 있는 안전하지 않은 문자들을 표현할 수 있는 인코딩방식이 고안되었다
- 인코딩은 안저하지 않은 문자를 퍼센티지 기호(%)로 시작해, ASCII 코드로 표현되는 두 개의 16진수 숫자로 이루어진 '이스케이프'문자열로 박누다

### **2.4.3 문자 제한**

- 몇몇 문자는 URL내에서 특별한 의미로 예약되어 있다
- URL에서 예약된 문자들을 본래의 목적이 아닌 다른 용도로 사용하려면, 그 전에 반드시 인코딩해야 하는 문자들이 있다
- 예를 들어 %는 인코딩된 문자에 사용할 이스케이프 토큰으로 선점, / 는 경로 컴포넌트에 있는 경로 세그먼트를 나누는 용도로 선점한다는 의미를 지니고 있다

### **2.4.4 좀더 알아보기**

- 안전하지 않은 모든 문자를 인코딩하기만 하면, 다른 애플리케이션으로부터 특별한 의미를 가지는 문자를 받았을 때 혼동할 걱정 없이, 애플리케이션 간에 공유할 수 잇는 URL의 원형을 유지할 수 있다
- 해당 문다르을 직접 입력 받는 애플리케이션이 어떤 문자를 인코딩해야 하는지 결정하기에 가장 좋은 위치다

## \*_2.5 스킴의 바다_

- 웹에서 쓰이는 일반 스킴들의 포멧은 여러 종류가 있다
- [참고](http://www.ktword.co.kr/test/view/view.php?m_temp1=2340)

## **2.6 미래**

- URL이 완벽한 것은 아니다. 사실 URL은 주소이지 실제 이름은 아니다. URL의 단점은 리소스가 옮겨지면 URL을 더는 사용할 수 없다는 것이다
- 인터넷 기술 테스크 포스는 URN이라는 새로운 표준 작업을 만들었다. URN은 객체가 옮겨지더라도 항상 객체를 가리킬 수 있는 이름을 제공한다
- 지속 통합 자원 지시자(PURL)을 사용하면 URL로 URN의 기능을 제공할 수 있다. PURL은 리소스의 실제 URL 목록을 관리하고 추적하는 리소스 위치 중개 서버를 두고, 해당 리소스를 우회적으로 제공한다

### **2.6.1 지금이 아니면 언제?**

- URL에서 URN으로 주소 체계를 바꾸는 것은 매우 큰 작업이다. URN으로 전환하기 위한 모든 것이 준비되려면 시간이 걸리기 때문에, URL은 당분간 계속 사용될 것이다
