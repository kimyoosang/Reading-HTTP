# Chapter5. 웹 서버

## **5.1 다채로운 웹 서버**

- 웹 서버는 HTTP 요청을 처리하고 응답을 제공한다. '웹 서버'라는 용어는 웹 서버 소프트웨어와 웹페이지 제공에 특화된 장비 양쪽 모두를 가리킨다
- 기능은 달라도, 모든 웹 서버는 리소스에 대한 HTTP 요청을 받아서 콘텐츠를 클라이언트에게 돌려준다

### **5.1.1 웹 서버 구현**

- 웹 서버는 HTTP 잋 그와 관련된 TCP 처리를 구현한 것이다. 웹 서버는 자신이 제공하는 리소스를 관리하고 웹 서버를 설정, 통제, 확장하기 위한 관리 기능을 제공한다
- 웹 서버는 HTTP 프로토콜을 구현하고, 웹 리소스를 관리하고, 웹 서버 관리 기능을 제공한다. 웹 서버는 TCP 커넥션 관리에 대한 책임을 운영체제와 나눠 갖는다. 운영체제는 컴퓨터 시스템의 하드웨어를 고나리하고 TCP/IP 네트워크 지원, 웹 리소스를 유지하기 위한 파일 시스템, 현재 연산 활동을 제어하기 이ㅜ한 프로세스 관리를 제공한다
- 웹 서버는 여러 가지 형태가 가능하다
  1. 다목적 소프투웨어 웹 서버를 표준 컴퓨터 시스템에 설치하고 실행할 수 있다
  2. 마이크로프로세서의 기적으로, 어떤 회사들은 사용자에게 판매할 전자기기 안에 몇 개의 컴퓨터 칩만으로 구현된 웹 서버를 내장시켜서 완전한 관리 콘솔로 제공한다

### **5.1.2 다목적 소프트웨어 웹 서버**

- 다목적 소프트웨어 웹 서버는 네트워크에 연결된 표준 컴퓨터 시스텥ㅁ에서 동작한다. 아파치나 W3C의 직소 같은 오픈 소스 소프트웨어를 사용할 수도 있고, 마이크로소프트나 아이플래닛의 웹 서버 같은 상용 소프트웨어를 사용할 수도 있다. 웹 서버 소프트웨어는 거의 모든 컴퓨터와 운영체제에서 동작한다

### **5.1.3 임베디드 웹 서버**

- 임베디드 웹 서버는 일반 소비자용 제품에 내장될 목적으로 만들어진 작은 웹 서버이다. 임베디드 웹 서버는 사용자가 그들의 일반 소비자용 기리를 간편한 웹 브라우저 인터페이스로 관리할 수 있게 해준다
- 아주 작은 임베디드 웹 서버의 예를 두 개 들면 다음과 같다
  1. 아이픽 성냥 머리 크기 웹 서버
  2. 넷미디어 사이트플레이어 SP1 이더넷 웹 서버

## **5.2 간단한 펄 웹 서버**

- 완전한 기능을 갖춘 HTTP 서버를 만들고자 한다면 해야 할 일이 좀 많다. 아파치 웹서버의 코어는 50,000줄이 넘는 코드로 되어 있고, 부가적인 처리 모듈들을 더하면 훨씬 커진다
- HTTP/1.1의 기능들을 지원하려면, 풍부한 리소스 지원, 가상 호스팅, 접근 제어, 로깅, 설정, 모니터링, 그 외의 성능을 위한 각종 기능들이 필요하다. 그러나 최소한으로 기능하는 HTTP 서버라면 30줄이하의 펄(Perl)코드로도 만들 수 있다

## **5.3 진짜 웹 서버가 하는 일**

- 최신식 상용 웹서버는 공통적으로 몇 가지 일들을 수행한다
  1. 커넥션을 맺는다
  - 클라이언트의 접속을 받아들이거나, 원치 않는 클라이언트라면 닫는다
  2. 요청을 받는다
  - HTTP 요청 메시지를 네트워크로부터 읽어 들인다
  3. 요청을 처리한다
  - 요청 메시지를 해석하고 행동을 취한다
  4. 리소스에 접근한다
  - 메시지에서 지정한 리소스에 접근한다
  5. 응답을 만든다
  - 올바른 헤더를 포함한 HTTP 응답 메시지를 생성한다
  6. 응답을 보낸다
  - 응답을 클라이언트에게 돌려준다
  7. 트랜잭션을 로그로 남긴다
  - 로그파일에 트랜잭션 완료에 대한 기록을 남긴다
