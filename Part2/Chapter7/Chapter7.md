# Chapter7. 캐시

- 웹 캐시는 자주 쓰이는 문서의 사본을 자동으로 보관하는 HTTP 장치다. 웹 요청이 캐시에 도착했을 때, 캐시된 로컬 사본이 존재한다면, 그 문서는 원 서버가 아니라 그 캐시로부터 제공된다
- 캐시는 다음과 같은 혜택을 준다
  1. 캐시는 불필요한 데이터 전송을 줄여서, 네트워크 요금으로 인한 비용을 줄여준다
  2. 캐시는 네트워크 병목을 줄여준다. 대역폭을 늘리지 않고도 페이지를 빨리 불러올 수 있게 된다
  3. 캐시는 원 서버에 대한 요청을 줄여준다. 서버는 부하를 줄일 수 있으니 더 빨리 응답할 수 있게 된다
  4. 페이지를 먼 곳에서 불러올수록 시간이 많이 걸리는데, 캐시는 거리로 인한 지연을 줄여준다

## **7.1 불필요한 데이터 전송**

- 복수의 클라이언트가 자주 쓰이는 원 서버 페이지에 접근할 때, 서버는 같은 문서를 클라이언트들에게 각각 한 번씩 전송하게 된다. 똑같은 바이트들이 네트워크를 통해 계속 반복해서 이동한다. 이 불필요한 데이터 전송은 값비싼 네트워크 대역폭을 잡아먹고, 전송을 느리게 만들며, 웹 서버에 부하를 준다
- 캐시를 이용하면, 첫 번째 서버 응답은 캐시에 보관된다. 캐시된 사본이 뒤이은 요청들에 대한 응답으로 사용될 수 있게 때문에, 원 서버가 중복해서 트래픽을 주고받는 낭비가 줄어들게 된다

## **7.2 대역폭 병목**

- 캐시는 또한 네트워크 병목을 줄여준다. 많은 네트워크가 원격 서버보다 로켓 네트워크 클라이언트에 더 넓은 대역폭을 제공한다. 클라이언트들이 서버에 접근할 때의 속도는, 그 경로에 있는 가장 느린 네트워크의 속도와 같다. 만약 클라이언트가 빠른 LAN에 있는 캐시로부터 사본을 가져온다면, 캐싱은 성능을 대폭 개선할 수 있을 것이다
- 대역폭은 큰 묵서에 대해 현저한 지원을 일으키며, 속도는 네트워크 종류의 차이에 따라 극적으로 달라진다. 이더넷 LAN이라면 5M 크기의 파일을 전송하는데 1초도 걸리지 않지만, 56-Kbps 모뎀이라면 749초(12분 이상)이 걸릴 것이다

## **갑작스런 요청 쇄도(Flash Crowds)**

- 캐싱은 갑장스런 요청 쇄도에 대처하기 위해 특히 중요하다. 갑작스런 사건으로 인해 많은 사람이 거의 동시에 웹 문서에 접근할 때 이런 일이 발생한다
- 이 결과로 초래된 불필요한 트래픽의 급증은 네트워크와 웹 서버에 심각한 장애를 야기시킨다

## **7.4 거리로 인한 지연**

- 비록 대역폭이 문제가 되지 않더라도, 거리가 문제가 될 수 있다. 모든 네트워크 라우터는 제각각 인터넷 트래픽을 지연시킨다. 그리고 클라이언트와 서버 사이에 라우터가 그다지 많지 않더라도, 빛의 속도 그 자체가 유의미한 지연을 유발한다
